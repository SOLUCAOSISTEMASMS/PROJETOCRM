<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Empresa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- FontAwesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
     body {
      background: linear-gradient(135deg, #0e7dec, #e9ecef);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Segoe UI', sans-serif;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card shadow-sm">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0"><i class="fas fa-building me-2"></i>Cadastro de Empresa</h4>
          </div>
          <div class="card-body">

            <form method="POST" novalidate>
              <!-- Dados da Empresa -->
              <div class="mb-3">
                <label for="nome" class="form-label"><i class="fas fa-signature me-2"></i>Nome da empresa *</label>
                <input type="text" class="form-control" id="nome" name="nome" required>
              </div>

              <div class="mb-3">
                <label for="email" class="form-label"><i class="fas fa-envelope me-2"></i>E-mail</label>
                <input type="email" class="form-control" id="email" name="email">
              </div>

              <div class="mb-3">
                <label for="telefone" class="form-label"><i class="fas fa-phone me-2"></i>Telefone</label>
                <input type="tel" class="form-control" id="telefone" name="telefone">
              </div>

              <div class="mb-3">
                <label for="endereco" class="form-label"><i class="fas fa-map-marker-alt me-2"></i>Endereço</label>
                <input type="text" class="form-control" id="endereco" name="endereco">
              </div>
              <div class="col-md-1">
    <label for="numero" class="form-label">Nº</label>
    <input type="text" class="form-control" id="numero" name="numero" value="{{ empresa.numero or '' }}">
  </div>

              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="cidade" class="form-label"><i class="fas fa-city me-2"></i>Cidade</label>
                  <input type="text" class="form-control" id="cidade" name="cidade">
                </div>
                <div class="col-md-6">
                  <label for="estado" class="form-label"><i class="fas fa-flag me-2"></i>Estado</label>
                  <input type="text" class="form-control" id="estado" name="estado">
                </div>
              </div>

              <div class="mb-3">
                <label for="representante" class="form-label"><i class="fas fa-user-tie me-2"></i>Representante</label>
                <input type="text" class="form-control" id="representante" name="representante">
              </div>

              <div class="mb-3">
                <label for="cnpj" class="form-label"><i class="fas fa-id-card me-2"></i>CNPJ</label>
                <input type="text" class="form-control" id="cnpj" name="cnpj">
              </div>

              <!-- Usuário Admin -->
              <hr class="my-4">
              <h5><i class="fas fa-user-shield me-2"></i>Dados do Usuário Administrador</h5>

              <div class="mb-3">
                <label for="admin_nome" class="form-label"><i class="fas fa-user me-2"></i>Nome do usuário *</label>
                <input type="text" class="form-control" id="admin_nome" name="admin_nome" required>
              </div>
              <div class="mb-3">
  <label for="admin_login" class="form-label">
    <i class="fas fa-id-badge me-2"></i>Login *
  </label>
  <input type="text" class="form-control" id="admin_login" name="admin_login" required>
</div>


              <div class="mb-3">
                <label for="admin_email" class="form-label"><i class="fas fa-envelope me-2"></i>Email *</label>
                <input type="email" class="form-control" id="admin_email" name="admin_email" required>
              </div>

              <div class="mb-3">
                <label for="admin_senha" class="form-label"><i class="fas fa-key me-2"></i>Senha *</label>
                <input type="password" class="form-control" id="admin_senha" name="admin_senha" required>
              </div>

              <div class="d-flex justify-content-between">
  <button type="submit" class="btn btn-primary">
    <i class="fas fa-save me-1"></i> Cadastrar Empresa
  </button>

  <a href="{{ url_for('entrada') }}" class="btn btn-outline-secondary">
    <i class="fas fa-times-circle me-1"></i> Cancelar
  </a>
</div>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  $(document).ready(function () {
    $('#telefone').mask('(00) 00000-0000');

$('#telefone').on('blur', function () {
  let valor = $(this).val().replace(/\D/g, '');
  if (valor.length === 10) {
    $(this).mask('(00) 0000-0000');
  } else {
    $(this).mask('(00) 00000-0000');
  }
});

    $('#cnpj').mask('00.000.000/0000-00');
  });
</script>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        {% for category, message in messages %}
          let tipo = "{{ category }}";
          let texto = "{{ message }}";

          if (tipo === "success") {
            Swal.fire({
              icon: "success",
              title: "Cadastro realizado!",
              text: texto,
              confirmButtonColor: "#198754"
            }).then(() => {
              window.location.href = "{{ url_for('login') }}";
            });
          } else if (tipo === "danger") {
            Swal.fire({
              icon: "error",
              title: "Erro ao cadastrar",
              text: texto,
              confirmButtonColor: "#dc3545"
            });
          }
        {% endfor %}
      });
    </script>
  {% endif %}
{% endwith %}


</body>
</html>